package mars.ru.des.robot.generator

import mars.ru.des.robot.taskDSL.Color
import mars.ru.des.robot.taskDSL.DriveUntil
import mars.ru.des.robot.taskDSL.Object
import mars.ru.des.robot.taskDSL.Task

class Brick1Generator {

	def static generate(Task task) '''
		#!/usr/bin/env python3
		
		
		def run():
		    for t in tasks:
		        t.execute()
		
		
		print("Starting brick 1")
		
		tasks = []
		«FOR t : mission.tasks SEPARATOR ","»
			«generateAction(t.getAction)»
		«ENDFOR»
		run()
	'''

	def dispatch static generateAction(DriveUntil action) '''
		«IF action.getObject() === Object.LAKE»
			ColorFinder(«DslHelper.toString(action.getColor())», «DslHelper.toString(action.getSpeed())»)
		«ELSEIF action.getObject() === Object.ROCK»
			RockFinder(«DslHelper.toString(action.getColor())», «DslHelper.toString(action.getSpeed())»)
		«ENDIF»
	'''

}
